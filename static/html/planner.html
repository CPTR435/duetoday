<!-- planner.html -->
<script src='static/fullcalendar/lib/moment.min.js'></script>
<link type="text/css" rel=StyleSheet href = "static/planner/planner.css">
<script>
$(document).ready(function(){


  $.ajax(
    {
      dataType: "json",
      url: "events.json",
      cache: false,
      success: function(events){
        var information ="<div class ='plannerItem'>"+
         "<div class = \"date\">Due: " + moment(events[0].start).format('dddd') + "</div>"+
         "<div class = \"eventName toggle\">" + events[0].title +"<i class =\"fa fa-caret-down\"></i></div>"+
         "<div class = \"eventDetails\">" + events[0].description +"</div></div>";
        for(var i=1; i<events.length; i++){
          if(moment(events[i-1].start).diff(moment(events[i].start),'days')==0){
          information = information.slice(0,-6);
          information +=
           "<div class = \"eventName toggle\">" + events[i].title +"<i class =\"fa fa-caret-down\"></i></div>"+
           "<div class = \"eventDetails\">" + events[i].description +"</div></div>";
         }
         else{
           information +="<div class ='plannerItem'>"+
            "<div class = \"date\">Due: " + moment(events[i].start).format('dddd') + "</div>"+
            "<div class = \"eventName toggle\">" + events[i].title +"<i class =\"fa fa-caret-down\"></i></div>"+
            "<div class = \"eventDetails\">" + events[i].description +"</div></div>";
         }
       }
        $("#eventDetails").html(information);
        $("div.toggle").click(function(){
            $(this).next(".eventDetails").toggle();
        });
      }


    });
  });
</script>

<div id = "eventDetails"></div>
